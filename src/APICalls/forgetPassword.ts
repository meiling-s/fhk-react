import axios from 'axios'
import { CREATE_FORGET_PASSWORD } from '../constants/requests'
import { AXIOS_DEFAULT_CONFIGS } from '../constants/configs'
import { returnApiToken } from "../utils/utils";
import { forgetPasswordForm } from '../interfaces/forgetPassword'

const request = axios.create({
  baseURL: AXIOS_DEFAULT_CONFIGS.baseURL.administrator
})

export const forgetPassword = async (data: forgetPasswordForm) => {
  //const token =  returnApiToken()

  //hardcoce accesstoken temporary
  const testingUser = {
    authToken: 'eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJMSHRDeFZVNnJtc2V3ZVlVUFkwbEkzQTZfM1NLUnBkWDh5a0RXZjJvZW44In0.eyJleHAiOjE3MDc0OTkxMDgsImlhdCI6MTcwNzQ2MzEwOCwianRpIjoiOTRjYzhmNjQtYzc1Ny00M2JiLWJkODEtNGU2NzQ2NTVlNDkyIiwiaXNzIjoiaHR0cDovLzEwLjE2Ni4yMi4yNTAva2MvcmVhbG1zL2NvbGxlY3RvciIsImF1ZCI6ImNvbXBhbnk4NjEzNDEiLCJzdWIiOiI4NWRmOWVhNi0xYTVhLTQ5NjgtYmNmNy1mZTZkNTgwMWUzM2UiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJjb21wYW55ODYxMzQxIiwic2Vzc2lvbl9zdGF0ZSI6ImQ3Y2IwYzVlLWU0MWQtNDZhOS04MDVkLTcwZTJmNDFiMjUwNCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovLzEwLjE2Ni4yMi4yNTAiLCJodHRwOi8vMTAuMTY2LjIyLjI1MC8qIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLWNvbGxlY3RvciIsIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iLCJVU0VSIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwiYXV0aG9yaXphdGlvbiI6eyJwZXJtaXNzaW9ucyI6W3sicnNpZCI6IjVjNzliN2YxLTEyZjEtNGQ2MC05OGYzLTZmYjVhMDNkMjMxYSIsInJzbmFtZSI6IkRlZmF1bHQgUmVzb3VyY2UifV19LCJzY29wZSI6InByb2ZpbGUgZW1haWwiLCJzaWQiOiJkN2NiMGM1ZS1lNDFkLTQ2YTktODA1ZC03MGUyZjQxYjI1MDQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJ0ZXN0IHRlc3QiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJ3aW5kYXRlc3QxIiwiZ2l2ZW5fbmFtZSI6InRlc3QiLCJmYW1pbHlfbmFtZSI6InRlc3QiLCJlbWFpbCI6IndxZTMxQGFrc2Rqa3NhLmNvbSJ9.ojtIsYZZAYr4Y67B3Yh1ZFEiuioBPoOEtK6BUJQk8C4pYTEVS0UQYvoPyszw5-6mJ5KdvpHZLBTTG8P2FP74ZmWl9CfLvQpOkXmPWQIGVlC1tEX6jrJzvyxSPpf5kkNF5s9-cv6lkIwZ3JGeUu6zfJpxg1Tm5UzZbgHke6ERM0OOThy9nJD8zDw1yQJ_HKpuz3s6tGmm0Q-9V2V22n7lo2NFpJUSbDEGfXzvi83zA-B2do8m8QIww1NmWs5CZQkaG4wEJmjJuGONZ3BE-98cYeQzO0XhfqeaJjevMYW_p0CrKYthOYwXQeEuuRU22fHfUo-aIFyfm7nyzaPoyiNSsg'
  }

  const prodUser = {
    authToken: 'eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJMSHRDeFZVNnJtc2V3ZVlVUFkwbEkzQTZfM1NLUnBkWDh5a0RXZjJvZW44In0.eyJleHAiOjE3MDc0OTkxMDgsImlhdCI6MTcwNzQ2MzEwOCwianRpIjoiOTRjYzhmNjQtYzc1Ny00M2JiLWJkODEtNGU2NzQ2NTVlNDkyIiwiaXNzIjoiaHR0cDovLzEwLjE2Ni4yMi4yNTAva2MvcmVhbG1zL2NvbGxlY3RvciIsImF1ZCI6ImNvbXBhbnk4NjEzNDEiLCJzdWIiOiI4NWRmOWVhNi0xYTVhLTQ5NjgtYmNmNy1mZTZkNTgwMWUzM2UiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJjb21wYW55ODYxMzQxIiwic2Vzc2lvbl9zdGF0ZSI6ImQ3Y2IwYzVlLWU0MWQtNDZhOS04MDVkLTcwZTJmNDFiMjUwNCIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cDovLzEwLjE2Ni4yMi4yNTAiLCJodHRwOi8vMTAuMTY2LjIyLjI1MC8qIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLWNvbGxlY3RvciIsIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iLCJVU0VSIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwiYXV0aG9yaXphdGlvbiI6eyJwZXJtaXNzaW9ucyI6W3sicnNpZCI6IjVjNzliN2YxLTEyZjEtNGQ2MC05OGYzLTZmYjVhMDNkMjMxYSIsInJzbmFtZSI6IkRlZmF1bHQgUmVzb3VyY2UifV19LCJzY29wZSI6InByb2ZpbGUgZW1haWwiLCJzaWQiOiJkN2NiMGM1ZS1lNDFkLTQ2YTktODA1ZC03MGUyZjQxYjI1MDQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsIm5hbWUiOiJ0ZXN0IHRlc3QiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJ3aW5kYXRlc3QxIiwiZ2l2ZW5fbmFtZSI6InRlc3QiLCJmYW1pbHlfbmFtZSI6InRlc3QiLCJlbWFpbCI6IndxZTMxQGFrc2Rqa3NhLmNvbSJ9.ojtIsYZZAYr4Y67B3Yh1ZFEiuioBPoOEtK6BUJQk8C4pYTEVS0UQYvoPyszw5-6mJ5KdvpHZLBTTG8P2FP74ZmWl9CfLvQpOkXmPWQIGVlC1tEX6jrJzvyxSPpf5kkNF5s9-cv6lkIwZ3JGeUu6zfJpxg1Tm5UzZbgHke6ERM0OOThy9nJD8zDw1yQJ_HKpuz3s6tGmm0Q-9V2V22n7lo2NFpJUSbDEGfXzvi83zA-B2do8m8QIww1NmWs5CZQkaG4wEJmjJuGONZ3BE-98cYeQzO0XhfqeaJjevMYW_p0CrKYthOYwXQeEuuRU22fHfUo-aIFyfm7nyzaPoyiNSsg'
  }

  let token = AXIOS_DEFAULT_CONFIGS.baseURL.administrator == 'http://10.166.22.250/' ? testingUser : prodUser 
  try {
    const response = await request({
      ...CREATE_FORGET_PASSWORD,
      data: data,
      headers: {
        AuthToken: token.authToken // remove this later
      }
    })
    return response
  } catch (e) {
    console.error('request forget password failed:', e)
    return null
  }
}
